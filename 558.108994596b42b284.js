"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[558],{2558:(E,b,s)=>{s.r(b),s.d(b,{DashboardModule:()=>k});var u=s(6895),c=s(433),r=s(672),f=s(1334),Z=s(7834),C=s(2965),y=s(8226),v=s(5226),S=s.n(v),t=s(1571),g=s(1445);let D=(()=>{class o{constructor(){this.mainChart={},this.initMainChart()}random(a,e){return Math.floor(Math.random()*(e-a+1)+a)}initMainChart(a="Month"){const e=(0,g.Z)("--cui-success")??"#4dbd74",n=(0,g.Z)("--cui-info")??"#20a8d8",l=((o,i=100)=>{if(typeof o>"u")throw new TypeError("Hex color is not defined");if(!o.match(/^#(?:[0-9a-f]{3}){1,2}$/i))throw new Error(`${o} is not a valid hex color`);let e,n,l;return 7===o.length?(e=parseInt(o.slice(1,3),16),n=parseInt(o.slice(3,5),16),l=parseInt(o.slice(5,7),16)):(e=parseInt(o.slice(1,2),16),n=parseInt(o.slice(2,3),16),l=parseInt(o.slice(3,5),16)),`rgba(${e}, ${n}, ${l}, ${i/100})`})((0,g.Z)("--cui-info"),10)??"#20a8d8",h=(0,g.Z)("--cui-danger")||"#f86c6b";this.mainChart.elements="Month"===a?12:27,this.mainChart.Data1=[],this.mainChart.Data2=[],this.mainChart.Data3=[];for(let d=0;d<=this.mainChart.elements;d++)this.mainChart.Data1.push(this.random(1,10)),this.mainChart.Data2.push(this.random(1,20)),this.mainChart.Data3.push(10);let p=[];if("Month"===a)p=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Deciembre"];else{const d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];p=d.concat(d,d,d)}const m=[{backgroundColor:l,borderColor:n,pointHoverBackgroundColor:n,borderWidth:2,fill:!0},{backgroundColor:"transparent",borderColor:e||"#4dbd74",pointHoverBackgroundColor:"#fff"},{backgroundColor:"transparent",borderColor:h||"#f86c6b",pointHoverBackgroundColor:h,borderWidth:1,borderDash:[8,5]}],z=[{data:this.mainChart.Data1,label:"Current",...m[0]},{data:this.mainChart.Data2,label:"Previous",...m[1]},{data:this.mainChart.Data3,label:"BEP",...m[2]}],j={maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{labelColor:function(d){return{backgroundColor:d.dataset.borderColor}}}}},scales:{x:{grid:{drawOnChartArea:!1}},y:{beginAtZero:!0,max:250,ticks:{maxTicksLimit:5,stepSize:Math.ceil(50)}}},elements:{line:{tension:.4},point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}}};this.mainChart.type="line",this.mainChart.options=j,this.mainChart.data={datasets:z,labels:p}}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})();var A=s(4061),x=s(529);let q=(()=>{class o extends A.b{constructor(a){super(),this.http=a,this.AssingService("Dashboard")}getData(){return this.http.get(this.SetRoute("GetData"))}}return o.\u0275fac=function(a){return new(a||o)(t.LFG(x.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var U=s(1052),w=s(8501);function P(o,i){if(1&o&&t._UZ(0,"app-widgets-dropdown",9),2&o){const a=t.oxw();t.Q6J("row",a.datafor1Section)}}const I=function(){return{"marginTop.px":40}};function M(o,i){if(1&o){const a=t.EpF();t.TgZ(0,"c-card",3)(1,"c-card-body")(2,"c-row")(3,"c-col",10)(4,"h4",11),t._uU(5," Inscripciones "),t.qZA(),t.TgZ(6,"div",12),t._uU(7,"Enero - Diciembre 2023"),t.qZA()(),t.TgZ(8,"c-col",13)(9,"button",14),t.O4$(),t._UZ(10,"svg",15),t.qZA(),t.kcU(),t.TgZ(11,"form",16)(12,"c-button-group",17),t._UZ(13,"input",18),t.TgZ(14,"label",19),t.NdJ("click",function(){t.CHM(a);const n=t.oxw();return t.KtG(n.setTrafficPeriod("Month"))}),t._uU(15,"Mes"),t.qZA()()()()(),t.TgZ(16,"c-chart",20),t._uU(17," Main chart "),t.qZA()(),t.TgZ(18,"c-card-footer")(19,"c-row",21)(20,"c-col",22)(21,"div",23),t._uU(22,"Cantidad total de Ni\xf1os Registrados"),t.qZA(),t.TgZ(23,"strong"),t._uU(24),t.qZA(),t.TgZ(25,"c-progress",24),t._UZ(26,"c-progress-bar",25),t.qZA()(),t.TgZ(27,"c-col",22)(28,"div",23),t._uU(29,"Cantidad de Papas Registrados"),t.qZA(),t.TgZ(30,"strong"),t._uU(31),t.qZA(),t.TgZ(32,"c-progress",24),t._UZ(33,"c-progress-bar",26),t.qZA()(),t.TgZ(34,"c-col",22)(35,"div",23),t._uU(36,"Cantidad de Colaboradores trabajando"),t.qZA(),t.TgZ(37,"strong"),t._uU(38),t.qZA(),t.TgZ(39,"c-progress",24),t._UZ(40,"c-progress-bar",27),t.qZA()(),t.TgZ(41,"c-col",22)(42,"div",23),t._uU(43,"Cantidad Total de Pagos Registrados"),t.qZA(),t.TgZ(44,"strong"),t._uU(45),t.qZA(),t.TgZ(46,"c-progress",24),t._UZ(47,"c-progress-bar",28),t.qZA()(),t.TgZ(48,"c-col",22)(49,"div",23),t._uU(50,"Cantidad de Inscripciones"),t.qZA(),t.TgZ(51,"strong"),t._uU(52),t.qZA(),t.TgZ(53,"c-progress",24),t._UZ(54,"c-progress-bar",29),t.qZA()()()()()}if(2&o){const a=t.oxw();t.xp6(11),t.Q6J("formGroup",a.trafficRadioGroup),t.xp6(5),t.Q6J("data",a.mainChart.data)("height",300)("ngStyle",t.DdM(13,I))("options",a.mainChart.options)("type",a.mainChart.type),t.xp6(3),t.Q6J("md",5)("xs",1),t.xp6(5),t.Oqu(a.dashboardData.quantityTotalChildren),t.xp6(7),t.Oqu(a.dashboardData.quantityTotalParents),t.xp6(7),t.Oqu(a.dashboardData.quantityTotalCollaborators),t.xp6(7),t.Oqu(a.dashboardData.quantityTotalPayments),t.xp6(7),t.Oqu(a.dashboardData.quantityTotalInscriptions)}}function O(o,i){if(1&o&&t._UZ(0,"app-widgets-dropdown",9),2&o){const a=t.oxw();t.Q6J("row",a.datafor2Section)}}function _(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"td",6),t._UZ(2,"c-avatar",30),t.qZA(),t.TgZ(3,"td")(4,"div"),t._uU(5),t.qZA(),t.TgZ(6,"div",12)(7,"span"),t._uU(8),t.qZA(),t._uU(9),t.qZA()(),t.TgZ(10,"td",6),t.O4$(),t.TgZ(11,"svg",31),t._UZ(12,"rect",32)(13,"rect",33)(14,"rect",34),t.qZA()(),t.kcU(),t.TgZ(15,"td")(16,"div",35)(17,"div",36)(18,"strong"),t._uU(19),t.qZA()(),t.TgZ(20,"div",37)(21,"small",23),t._uU(22),t.qZA()()(),t.TgZ(23,"c-progress",38),t._UZ(24,"c-progress-bar",39),t.qZA()(),t.TgZ(25,"td",6)(26,"c-badge",40),t._uU(27),t.qZA()(),t.TgZ(28,"td")(29,"div",12),t._uU(30),t.qZA(),t.TgZ(31,"strong"),t._uU(32),t.qZA()()()),2&o){const a=i.$implicit;t.xp6(2),t.s9C("src",a.avatar),t.s9C("status",a.status),t.xp6(3),t.Oqu(a.name),t.xp6(3),t.Oqu(a.state),t.xp6(1),t.hij(" | Registered: ",a.registered," "),t.xp6(10),t.hij("",a.quantity," Ni\xf1os"),t.xp6(3),t.hij(" ",a.period," "),t.xp6(2),t.s9C("color",a.color),t.Q6J("value",a.usage),t.xp6(2),t.s9C("color",a.isDeleted?"danger":"success"),t.xp6(1),t.Oqu(a.isDeleted?"INACTIVO":"ACTIVO"),t.xp6(3),t.Oqu(a.city),t.xp6(2),t.Oqu(a.branchOffice)}}class F{constructor(i={}){this.branchOffice="",this.city="",Object.assign(this,i)}}const J=[{path:"",component:(()=>{class o{constructor(a,e,n){this.chartsData=a,this.dashboardService=e,this.storageService=n,this.users=[],this.mainChart={},this.chart=[],this.isAdmin=!1,this.isVisibleFisrtSection=!1,this.trafficRadioGroup=new c.nJ({trafficRadio:new c.p4("Month")}),this.datafor1Section=new y.j,this.datafor2Section=new y.j,this.isAdmin=n.validateIsAdmin()}ngOnInit(){this.initCharts(),this.getDataDashboard(),setInterval(()=>{this.getDataDashboard()},1e4)}showAlert(a,e,n,l=2){let h;h=1e3*l,S().fire({icon:a,title:e,text:n,showConfirmButton:!1,timer:h})}getDataDashboard(){this.dashboardService.getData().subscribe({next:a=>{this.dashboardData=a,this.isVisibleFisrtSection=!0,this.users=[],this.getData1Section(a),this.getData2Section(a);for(let e=0;e<a.collaborators.length;e++)this.users.push(new F({name:a.collaborators[e].collaborator,state:a.collaborators[e].collaboratorAge,registered:a.collaborators[e].collaboratorStartDate,country:"",quantity:a.collaborators[e].quantityChildrenAssigned,usage:this.convertToPercent(a.collaborators[e].quantityChildrenAssigned),period:"Enero, 2023 - Diciembre, 2023",payment:a.collaborators[e].isDeleted?"Activo":"Inactivo",activity:a.collaborators[e].collaboratorBranchOffice,avatar:"./assets/img/avatars/avatarwoman.jpg",status:this.selectColor(a.collaborators[e].quantityChildrenAssigned),color:this.selectColor(a.collaborators[e].quantityChildrenAssigned),branchOffice:a.collaborators[e].collaboratorBranchOffice,city:a.collaborators[e].collaboratorCity}));this.notification("Datos Actualizados")},error:a=>{this.showAlert("error","Error",a)}})}getData1Section(a){this.datafor1Section.value1=a.quantityPayedPayments,this.datafor1Section.title1="Pagos Realizados",this.datafor1Section.amount1=a.totalPayedPayments,this.datafor1Section.type1="BS",this.datafor1Section.color1="success",this.datafor1Section.value2=a.quantityPartiallyPayedPayments,this.datafor1Section.title2="Pagos Parciales Realizados",this.datafor1Section.amount2=a.totalPartiallyPayedPayments,this.datafor1Section.type2="BS",this.datafor1Section.color2="info",this.datafor1Section.value3=a.quantityRegisteredPayments,this.datafor1Section.title3="Pagos por Adelantado Realizados",this.datafor1Section.amount3=a.totalRegisteredPayments,this.datafor1Section.type3="BS",this.datafor1Section.color3="warning",this.datafor1Section.value4=a.quantityUnpayPayments,this.datafor1Section.title4="Pagos en Mora",this.datafor1Section.amount4=a.totalUnpayPayments,this.datafor1Section.type4="BS",this.datafor1Section.color4="danger"}getData2Section(a){this.datafor2Section.title1="Total pagos en Efectivo",this.datafor2Section.value1=a.quantityCashPayments,this.datafor2Section.amount1=a.totalCashPayments,this.datafor2Section.type1="BS",this.datafor2Section.color1="info",this.datafor2Section.title2="Total pagos en QR",this.datafor2Section.value2=a.quantityQrPayments,this.datafor2Section.amount2=a.totalQrPayments,this.datafor2Section.type2="BS",this.datafor2Section.color2="success",this.datafor2Section.title3="Total pagos en Transferencia Bancaria",this.datafor2Section.value3=a.quantityTransferPayments,this.datafor2Section.amount3=a.totalTransferPayments,this.datafor2Section.type3="BS",this.datafor2Section.color3="warning",this.datafor2Section.isVisible4=!1}selectColor(a){return a>=10?"danger":a<=4?"info":"warning"}convertToPercent(a){return a/11*100}notification(a){this.message=a,this.visible=!0}initCharts(){this.mainChart=this.chartsData.mainChart}setTrafficPeriod(a){this.trafficRadioGroup.setValue({trafficRadio:a}),this.chartsData.initMainChart(a),this.initCharts()}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(D),t.Y36(q),t.Y36(U.V))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:26,vars:7,consts:[[3,"row",4,"ngIf"],["class","mb-4",4,"ngIf"],["xs",""],[1,"mb-4"],["align","middle","cTable","",1,"mb-0","border",3,"hover","responsive","striped"],["cTableColor","light"],[1,"text-center"],["cIcon","","name","cilPeople"],[4,"ngFor","ngForOf"],[3,"row"],["sm","5"],["id","traffic",1,"card-title","mb-0"],[1,"small","text-medium-emphasis"],["sm","7",1,"d-none","d-md-block"],["cButton","","color","primary",1,"float-end"],["cIcon","","name","cilCloudDownload"],[3,"formGroup"],["role","group",1,"float-end","me-3"],["formControlName","trafficRadio","type","radio","value","Month",1,"btn-check"],["cButton","","cFormCheckLabel","","color","secondary","variant","outline",3,"click"],[3,"data","height","ngStyle","options","type"],[1,"text-center",3,"md","xs"],[1,"mb-sm-2","mb-0"],[1,"text-medium-emphasis"],["thin","",1,"mt-2"],["color","success","value","40"],["color","info","value","20"],["color","warning","value","60"],["color","danger","value","80"],["value","40"],["size","md",3,"src","status"],["width","20","height","13","viewBox","0 0 20 13","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","20","height","4.33333","fill","#D52B1E"],["y","4.33333","width","20","height","4.33333","fill","#F7D116"],["y","8.66667","width","20","height","4.33333","fill","#1B5E20"],[1,"clearfix"],[1,"float-start"],[1,"float-end"],["thin",""],[3,"value","color"],[1,"me-1",3,"color"]],template:function(a,e){1&a&&(t.YNc(0,P,1,1,"app-widgets-dropdown",0),t.YNc(1,M,55,14,"c-card",1),t.YNc(2,O,1,1,"app-widgets-dropdown",0),t.TgZ(3,"c-row")(4,"c-col",2)(5,"c-card",3)(6,"c-card-header"),t._uU(7,"Colaboradores Actualmente Trabajando en las sucursales"),t.qZA(),t.TgZ(8,"c-card-body")(9,"table",4)(10,"thead",5)(11,"tr")(12,"th",6),t.O4$(),t._UZ(13,"svg",7),t.qZA(),t.kcU(),t.TgZ(14,"th"),t._uU(15,"Nombre Completo"),t.qZA(),t.TgZ(16,"th",6),t._uU(17,"Nacionalidad"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Cantidad Ni\xf1os a cargo"),t.qZA(),t.TgZ(20,"th",6),t._uU(21,"Estado"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Ciudad/Sucursal"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,_,33,13,"tr",8),t.qZA()()()()()()),2&a&&(t.Q6J("ngIf",e.isVisibleFisrtSection&&e.isAdmin),t.xp6(1),t.Q6J("ngIf",e.isVisibleFisrtSection),t.xp6(1),t.Q6J("ngIf",e.isVisibleFisrtSection&&e.isAdmin),t.xp6(7),t.Q6J("hover",!0)("responsive",!0)("striped",!0),t.xp6(16),t.Q6J("ngForOf",e.users))},dependencies:[r.AkF,r.yue,r.xUh,r.nkx,f.ar,u.sg,u.O5,u.PC,r.iok,r.Yp0,r.t15,r.RIQ,c._Y,c.Fj,c._,c.JJ,c.JL,c.sg,c.u,r.Hq3,r.NWu,r.KbJ,Z.d,r.Ao0,r.auY,r.io7,w.c,r.FN3],styles:["[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:x-small}"]}),o})(),data:{title:$localize`Dashboard`}},{path:"dashboard-sapg",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard-sapg"]],decls:2,vars:0,template:function(a,e){1&a&&(t.TgZ(0,"p"),t._uU(1,"dashboard-sapg works!"),t.qZA())}}),o})(),data:{title:"Dashboard"}}];let Q=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[C.Bz.forChild(J),C.Bz]}),o})();var N=s(2069);let k=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[Q,r.dTQ,r.dGk,f.QX,r.P4_,u.ez,r.zE6,r.qek,c.UX,r.hJ1,r.ejP,r.hJ1,r.ga2,Z.N,r.FxY,r.U$I,N.WidgetsModule,f.QX,r.TXv]}),o})()}}]);